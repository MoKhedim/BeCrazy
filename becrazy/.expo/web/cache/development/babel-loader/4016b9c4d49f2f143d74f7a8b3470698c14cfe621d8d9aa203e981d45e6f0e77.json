{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Text } from \"../../components/Themed\";\nimport { Camera, CameraType, FlashMode } from \"expo-camera\";\nimport { Audio } from \"expo-av\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { Feather } from \"@expo/vector-icons\";\nimport styles from \"./styles/camera\";\nimport { useIsFocused } from \"@react-navigation/native\";\nimport FillButton from \"../../components/camera/FillButton\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CameraScreen(_ref) {\n  var navigation = _ref.navigation;\n  var isFocused = useIsFocused();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isCameraReady = _useState2[0],\n    setIsCameraReady = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hasCameraPermissions = _useState4[0],\n    setHasCameraPermissions = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    hasAudioPermissions = _useState6[0],\n    setHasAudioPermissions = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    hasGalleryPermissions = _useState8[0],\n    setHasGalleryPermissions = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    galleryItems = _useState10[0],\n    setGalleryItems = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    cameraRef = _useState12[0],\n    setCameraRef = _useState12[1];\n  var _useState13 = useState(CameraType.back),\n    _useState14 = _slicedToArray(_useState13, 2),\n    cameraType = _useState14[0],\n    setCameraType = _useState14[1];\n  var _useState15 = useState(FlashMode.off),\n    _useState16 = _slicedToArray(_useState15, 2),\n    cameraFlash = _useState16[0],\n    setCameraFlash = _useState16[1];\n  var _useState17 = useState(true),\n    _useState18 = _slicedToArray(_useState17, 2),\n    isMuted = _useState18[0],\n    setIsMuted = _useState18[1];\n  var _useState19 = useState(30),\n    _useState20 = _slicedToArray(_useState19, 1),\n    maxDuration = _useState20[0];\n  var _useState21 = useState(3),\n    _useState22 = _slicedToArray(_useState21, 1),\n    minDuration = _useState22[0];\n  if (Platform.OS === \"web\") {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: styles.noPermissionsText,\n        children: \"This feature is not available on web\"\n      })\n    });\n  }\n  useEffect(function () {\n    var requestPermissions = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n        setHasCameraPermissions(cameraStatus.status == \"granted\");\n        var audioStatus = yield Audio.requestPermissionsAsync();\n        setHasAudioPermissions(audioStatus.status == \"granted\");\n        var galleryStatus = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (galleryStatus.status == \"granted\") {\n          setHasGalleryPermissions(true);\n          var userGalleryMedia = yield MediaLibrary.getAssetsAsync({\n            sortBy: [\"creationTime\"],\n            mediaType: [\"video\"]\n          });\n          setGalleryItems(userGalleryMedia.assets);\n        }\n      });\n      return function requestPermissions() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    void requestPermissions();\n  }, []);\n  var recordVideo = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (cameraRef) {\n        try {\n          var options = {\n            maxDuration: maxDuration,\n            quality: Camera.Constants.VideoQuality[\"480\"],\n            mute: isMuted\n          };\n          var startTime = new Date();\n          var videoRecordPromise = yield cameraRef.recordAsync(options);\n          var elapsedTime = new Date().getTime() - startTime.getTime();\n          if (elapsedTime < minDuration * 1000) {\n            alert(\"Video is too short\");\n            return;\n          }\n          if (videoRecordPromise) {\n            var data = videoRecordPromise;\n            var source = data.uri;\n            navigation.navigate(\"SavePostScreen\", {\n              source: source\n            });\n          }\n        } catch (error) {\n          console.warn(error);\n        }\n      }\n    });\n    return function recordVideo() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var stopVideo = function stopVideo() {\n    if (cameraRef) {\n      cameraRef.stopRecording();\n    }\n  };\n  var pickFromGallery = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Videos,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 1,\n        videoMaxDuration: maxDuration\n      });\n      if (!result.canceled) {\n        navigation.navigate(\"SavePostScreen\", {\n          source: result.assets[0].uri\n        });\n      }\n    });\n    return function pickFromGallery() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  if (!hasCameraPermissions || !hasAudioPermissions || !hasGalleryPermissions) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: styles.noPermissionsText,\n        children: \"You need to grant camera and audio permissions to use this feature\"\n      })\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [isFocused && _jsx(Camera, {\n      ref: function ref(_ref5) {\n        return setCameraRef(_ref5);\n      },\n      style: styles.camera,\n      ratio: \"16:9\",\n      type: cameraType,\n      flashMode: cameraFlash,\n      onCameraReady: function onCameraReady() {\n        return setIsCameraReady(true);\n      }\n    }), _jsxs(View, {\n      style: styles.sideBarContainer,\n      children: [_jsxs(TouchableOpacity, {\n        style: styles.sideBarButton,\n        onPress: function onPress() {\n          return setCameraType(cameraType === CameraType.back ? CameraType.front : CameraType.back);\n        },\n        children: [_jsx(Feather, {\n          name: \"refresh-ccw\",\n          size: 24,\n          color: \"white\"\n        }), _jsx(Text, {\n          style: styles.iconText,\n          children: \"Flip\"\n        })]\n      }), _jsxs(TouchableOpacity, {\n        style: styles.sideBarButton,\n        onPress: function onPress() {\n          return setCameraFlash(cameraFlash === FlashMode.off ? FlashMode.torch : FlashMode.off);\n        },\n        children: [_jsx(Feather, {\n          name: \"zap\",\n          size: 24,\n          color: \"white\"\n        }), _jsx(Text, {\n          style: styles.iconText,\n          children: \"Flash\"\n        })]\n      }), _jsxs(TouchableOpacity, {\n        style: styles.sideBarButton,\n        onPress: function onPress() {\n          return setIsMuted(!isMuted);\n        },\n        children: [_jsx(Feather, {\n          name: isMuted ? \"mic-off\" : \"mic\",\n          size: 24,\n          color: \"white\"\n        }), _jsx(Text, {\n          style: styles.iconText,\n          children: \"Mute\"\n        })]\n      })]\n    }), _jsxs(View, {\n      style: styles.bottomBarContainer,\n      children: [_jsx(View, {\n        style: {\n          flex: 1\n        }\n      }), _jsx(View, {\n        style: styles.recordButtonContainer,\n        children: isCameraReady && _jsx(FillButton, {\n          whenPressed: function whenPressed() {\n            return recordVideo();\n          },\n          whenReleased: function whenReleased() {\n            return stopVideo();\n          },\n          progressTimer: maxDuration * 1000\n        })\n      }), _jsx(View, {\n        style: {\n          flex: 1\n        },\n        children: _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return pickFromGallery();\n          },\n          style: styles.galleryButton,\n          children: galleryItems[0] && _jsx(Image, {\n            style: styles.galleryButtonImage,\n            source: {\n              uri: galleryItems[0].uri\n            }\n          })\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","View","TouchableOpacity","Image","Platform","Text","Camera","CameraType","FlashMode","Audio","ImagePicker","MediaLibrary","Feather","styles","useIsFocused","FillButton","jsx","_jsx","jsxs","_jsxs","CameraScreen","_ref","navigation","isFocused","_useState","_useState2","_slicedToArray","isCameraReady","setIsCameraReady","_useState3","_useState4","hasCameraPermissions","setHasCameraPermissions","_useState5","_useState6","hasAudioPermissions","setHasAudioPermissions","_useState7","_useState8","hasGalleryPermissions","setHasGalleryPermissions","_useState9","_useState10","galleryItems","setGalleryItems","_useState11","_useState12","cameraRef","setCameraRef","_useState13","back","_useState14","cameraType","setCameraType","_useState15","off","_useState16","cameraFlash","setCameraFlash","_useState17","_useState18","isMuted","setIsMuted","_useState19","_useState20","maxDuration","_useState21","_useState22","minDuration","OS","style","container","children","noPermissionsText","requestPermissions","_ref2","_asyncToGenerator","cameraStatus","requestCameraPermissionsAsync","status","audioStatus","requestPermissionsAsync","galleryStatus","requestMediaLibraryPermissionsAsync","userGalleryMedia","getAssetsAsync","sortBy","mediaType","assets","apply","arguments","recordVideo","_ref3","options","quality","Constants","VideoQuality","mute","startTime","Date","videoRecordPromise","recordAsync","elapsedTime","getTime","alert","data","source","uri","navigate","error","console","warn","stopVideo","stopRecording","pickFromGallery","_ref4","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Videos","allowsEditing","aspect","videoMaxDuration","canceled","ref","camera","ratio","type","flashMode","onCameraReady","sideBarContainer","sideBarButton","onPress","front","name","size","color","iconText","torch","bottomBarContainer","flex","recordButtonContainer","whenPressed","whenReleased","progressTimer","galleryButton","galleryButtonImage"],"sources":["/Users/mohammedkhedim/Gitclones/BeCrazy/becrazy/screens/camera/CameraScreen.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { View, TouchableOpacity, Image, Platform } from \"react-native\";\r\nimport { Text } from \"../../components/Themed\";\r\nimport { Camera, CameraRecordingOptions, CameraType, FlashMode } from \"expo-camera\";\r\nimport { Audio } from \"expo-av\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport * as MediaLibrary from \"expo-media-library\";\r\n\r\nimport { Feather } from \"@expo/vector-icons\";\r\n\r\n\r\nimport styles from \"./styles/camera\";\r\nimport { RootStackScreenProps } from \"../../types\";\r\nimport { useIsFocused } from \"@react-navigation/native\";\r\nimport FillButton from \"../../components/camera/FillButton\";\r\n\r\n\r\n/**\r\n * Function that renders a component responsible showing\r\n * a view with the camera preview, recording videos, controling the camera and\r\n * letting the user pick a video from the gallery\r\n * @returns Functional Component\r\n */\r\nexport default function CameraScreen({ navigation }: RootStackScreenProps<\"CameraScreen\">) {\r\n\t// check if the camera is ready and the user is focused on the screen to know when to show the camera preview\r\n\tconst isFocused = useIsFocused();\r\n\r\n\t// is camera ready is for when the camera initializes\r\n\tconst [isCameraReady, setIsCameraReady] = useState(false);\r\n\r\n\r\n\t// the state for the camera permissions and the gallery permissions\r\n\tconst [hasCameraPermissions, setHasCameraPermissions] = useState(false);\r\n\tconst [hasAudioPermissions, setHasAudioPermissions] = useState(false);\r\n\tconst [hasGalleryPermissions, setHasGalleryPermissions] = useState(false);\r\n\r\n\t// state for the gallery items\r\n\tconst [galleryItems, setGalleryItems] = useState<Array<MediaLibrary.Asset>>([]);\r\n\r\n\t// state for the camera settings\r\n\tconst [cameraRef, setCameraRef] = useState<Camera | null>(null);\r\n\tconst [cameraType, setCameraType] = useState(CameraType.back);\r\n\tconst [cameraFlash, setCameraFlash] = useState(FlashMode.off);\r\n\tconst [isMuted, setIsMuted] = useState(true);\r\n\t// duration are in seconds\r\n\tconst [maxDuration] = useState(30);\r\n\tconst [minDuration] = useState(3);\r\n\r\n\r\n\t// check if the user is on web and if so show message\r\n\tif (Platform.OS === \"web\") {\r\n\t\treturn (\r\n\t\t\t<View style={styles.container}>\r\n\t\t\t\t<Text style={styles.noPermissionsText}>This feature is not available on web</Text>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst requestPermissions = async () => {\r\n\t\t\tconst cameraStatus = await Camera.requestCameraPermissionsAsync();\r\n\t\t\tsetHasCameraPermissions(cameraStatus.status == \"granted\");\r\n\r\n\t\t\tconst audioStatus = await Audio.requestPermissionsAsync();\r\n\t\t\tsetHasAudioPermissions(audioStatus.status == \"granted\");\r\n\r\n\t\t\tconst galleryStatus = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n\t\t\tif (galleryStatus.status == \"granted\") {\r\n\t\t\t\tsetHasGalleryPermissions(true);\r\n\t\t\t\tconst userGalleryMedia = await MediaLibrary.getAssetsAsync({ sortBy: [\"creationTime\"], mediaType: [\"video\"] });\r\n\t\t\t\tsetGalleryItems(userGalleryMedia.assets);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvoid requestPermissions();\r\n\t}, []);\r\n\r\n\r\n\r\n\tconst recordVideo = async () => {\r\n\t\tif (cameraRef) {\r\n\t\t\ttry {\r\n\t\t\t\t/*\r\n                * The options for the video recording\r\n                * maxDuration: the maximum duration of the video = 60 seconds\r\n                * quality: the quality of the video = 480p\r\n                * */\r\n\t\t\t\tconst options: CameraRecordingOptions = {\r\n\t\t\t\t\tmaxDuration: maxDuration,\r\n\t\t\t\t\tquality: Camera.Constants.VideoQuality[\"480\"],\r\n\t\t\t\t\tmute: isMuted,\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Start the stopwatch\r\n\t\t\t\tconst startTime = new Date();\r\n\r\n\t\t\t\t// Start recording the video\r\n\t\t\t\tconst videoRecordPromise = await cameraRef.recordAsync(options);\r\n\r\n\t\t\t\t// Calculate the elapsed time\r\n\t\t\t\tconst elapsedTime = new Date().getTime() - startTime.getTime();\r\n\t\t\t\t// Check if the video is too short\r\n\t\t\t\tif (elapsedTime < minDuration * 1000) {\r\n\t\t\t\t\talert(\"Video is too short\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (videoRecordPromise) {\r\n\t\t\t\t\tconst data = videoRecordPromise;\r\n\t\t\t\t\tconst source = data.uri;\r\n\t\t\t\t\tnavigation.navigate(\"SavePostScreen\", { source });\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.warn(error);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst stopVideo = () => {\r\n\t\tif (cameraRef) {\r\n\t\t\tcameraRef.stopRecording();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\tconst pickFromGallery = async () => {\r\n\t\tconst result = await ImagePicker.launchImageLibraryAsync({\r\n\t\t\tmediaTypes: ImagePicker.MediaTypeOptions.Videos,\r\n\t\t\tallowsEditing: true,\r\n\t\t\taspect: [16, 9],\r\n\t\t\tquality: 1,\r\n\t\t\tvideoMaxDuration: maxDuration\r\n\t\t});\r\n\t\tif (!result.canceled) {\r\n\t\t\tnavigation.navigate(\"SavePostScreen\", { source: result.assets[0].uri });\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// if the user has not granted the camera and audio permissions, show a message\r\n\tif (!hasCameraPermissions || !hasAudioPermissions || !hasGalleryPermissions) {\r\n\t\treturn (\r\n\t\t\t<View style={styles.container}>\r\n\t\t\t\t<Text style={styles.noPermissionsText}>You need to grant camera and audio permissions to use this feature</Text>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<View style={styles.container}>\r\n\t\t\t{isFocused && (\r\n\t\t\t\t<Camera\r\n\t\t\t\t\tref={(ref) => setCameraRef(ref)}\r\n\t\t\t\t\tstyle={styles.camera}\r\n\t\t\t\t\tratio={\"16:9\"}\r\n\t\t\t\t\ttype={cameraType}\r\n\t\t\t\t\tflashMode={cameraFlash}\r\n\t\t\t\t\tonCameraReady={() => setIsCameraReady(true)}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<View style={styles.sideBarContainer}>\r\n\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\tstyle={styles.sideBarButton}\r\n\t\t\t\t\tonPress={() => setCameraType(cameraType === CameraType.back ? CameraType.front : CameraType.back)}>\r\n\r\n\t\t\t\t\t<Feather name=\"refresh-ccw\" size={24} color={\"white\"} />\r\n\t\t\t\t\t<Text style={styles.iconText}>Flip</Text>\r\n\t\t\t\t</TouchableOpacity>\r\n\r\n\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\tstyle={styles.sideBarButton}\r\n\t\t\t\t\tonPress={() => setCameraFlash(cameraFlash === FlashMode.off ? FlashMode.torch : FlashMode.off)}>\r\n\r\n\t\t\t\t\t<Feather name=\"zap\" size={24} color={\"white\"} />\r\n\t\t\t\t\t<Text style={styles.iconText}>Flash</Text>\r\n\t\t\t\t</TouchableOpacity>\r\n\r\n\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\tstyle={styles.sideBarButton}\r\n\t\t\t\t\tonPress={() => setIsMuted(!isMuted)}>\r\n\r\n\t\t\t\t\t<Feather name={isMuted ? \"mic-off\" : \"mic\"} size={24} color={\"white\"} />\r\n\t\t\t\t\t<Text style={styles.iconText}>Mute</Text>\r\n\t\t\t\t</TouchableOpacity>\r\n\t\t\t</View>\r\n\r\n\r\n\t\t\t<View style={styles.bottomBarContainer}>\r\n\t\t\t\t<View style={{ flex: 1 }}></View>\r\n\t\t\t\t<View style={styles.recordButtonContainer}>\r\n\t\t\t\t\t{isCameraReady && (\r\n\t\t\t\t\t\t<FillButton\r\n\t\t\t\t\t\t\twhenPressed={() => recordVideo()}\r\n\t\t\t\t\t\t\twhenReleased={() => stopVideo()}\r\n\t\t\t\t\t\t\t// convert the max duration to milliseconds\r\n\t\t\t\t\t\t\tprogressTimer={maxDuration * 1000}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</View>\r\n\t\t\t\t<View style={{ flex: 1 }}>\r\n\t\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\t\tonPress={() => pickFromGallery()}\r\n\t\t\t\t\t\tstyle={styles.galleryButton}>\r\n\t\t\t\t\t\t{galleryItems[0] && (\r\n\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\tstyle={styles.galleryButtonImage}\r\n\t\t\t\t\t\t\t\tsource={{ uri: galleryItems[0].uri }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t</View>\r\n\t\t\t</View>\r\n\t\t</View>\r\n\t);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}