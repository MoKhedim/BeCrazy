{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Text } from \"../../components/Themed\";\nimport { Camera, CameraType, FlashMode } from 'expo-camera';\nimport { Audio } from 'expo-av';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as MediaLibrary from 'expo-media-library';\nimport { Feather } from '@expo/vector-icons';\nimport styles from \"./styles/camera\";\nimport { useIsFocused } from '@react-navigation/native';\nimport FillButton from \"../../components/camera/FillButton\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CameraScreen(_ref) {\n  var navigation = _ref.navigation;\n  if (Platform.OS === 'web') {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: styles.noPermissionsText,\n        children: \"This feature is not available on web\"\n      })\n    });\n  }\n  var isFocused = useIsFocused();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isCameraReady = _useState2[0],\n    setIsCameraReady = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hasCameraPermissions = _useState4[0],\n    setHasCameraPermissions = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    hasAudioPermissions = _useState6[0],\n    setHasAudioPermissions = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    hasGalleryPermissions = _useState8[0],\n    setHasGalleryPermissions = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    galleryItems = _useState10[0],\n    setGalleryItems = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    cameraRef = _useState12[0],\n    setCameraRef = _useState12[1];\n  var _useState13 = useState(CameraType.back),\n    _useState14 = _slicedToArray(_useState13, 2),\n    cameraType = _useState14[0],\n    setCameraType = _useState14[1];\n  var _useState15 = useState(FlashMode.off),\n    _useState16 = _slicedToArray(_useState15, 2),\n    cameraFlash = _useState16[0],\n    setCameraFlash = _useState16[1];\n  var _useState17 = useState(true),\n    _useState18 = _slicedToArray(_useState17, 2),\n    isMuted = _useState18[0],\n    setIsMuted = _useState18[1];\n  var _useState19 = useState(30),\n    _useState20 = _slicedToArray(_useState19, 2),\n    maxDuration = _useState20[0],\n    setMaxDuration = _useState20[1];\n  var _useState21 = useState(3),\n    _useState22 = _slicedToArray(_useState21, 2),\n    minDuration = _useState22[0],\n    setMinDuration = _useState22[1];\n  useEffect(function () {\n    var requestPermissions = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n        setHasCameraPermissions(cameraStatus.status == 'granted');\n        var audioStatus = yield Audio.requestPermissionsAsync();\n        setHasAudioPermissions(audioStatus.status == 'granted');\n        var galleryStatus = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n        setHasGalleryPermissions(galleryStatus.status == 'granted');\n        if (galleryStatus.status == 'granted') {\n          var userGalleryMedia = yield MediaLibrary.getAssetsAsync({\n            sortBy: ['creationTime'],\n            mediaType: ['video']\n          });\n          setGalleryItems(userGalleryMedia.assets);\n        }\n      });\n      return function requestPermissions() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    requestPermissions();\n  }, []);\n  var recordVideo = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (cameraRef) {\n        try {\n          var options = {\n            maxDuration: maxDuration,\n            quality: Camera.Constants.VideoQuality['480'],\n            mute: isMuted\n          };\n          var startTime = new Date();\n          var videoRecordPromise = yield cameraRef.recordAsync(options);\n          var elapsedTime = new Date().getTime() - startTime.getTime();\n          if (elapsedTime < minDuration * 1000) {\n            alert('Video is too short');\n            return;\n          }\n          if (videoRecordPromise) {\n            var data = videoRecordPromise;\n            var source = data.uri;\n            navigation.navigate('SavePostScreen', {\n              source: source\n            });\n          }\n        } catch (error) {\n          console.warn(error);\n        }\n      }\n    });\n    return function recordVideo() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var stopVideo = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      if (cameraRef) {\n        cameraRef.stopRecording();\n      }\n    });\n    return function stopVideo() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var pickFromGallery = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Videos,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 1,\n        videoMaxDuration: maxDuration\n      });\n      if (!result.canceled) {\n        navigation.navigate('SavePostScreen', {\n          source: result.assets[0].uri\n        });\n      }\n    });\n    return function pickFromGallery() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  if (!hasCameraPermissions || !hasAudioPermissions || !hasGalleryPermissions) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: styles.noPermissionsText,\n        children: \"You need to grant camera and audio permissions to use this feature\"\n      })\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [isFocused && _jsx(Camera, {\n      ref: function ref(_ref6) {\n        return setCameraRef(_ref6);\n      },\n      style: styles.camera,\n      ratio: '16:9',\n      type: cameraType,\n      flashMode: cameraFlash,\n      onCameraReady: function onCameraReady() {\n        return setIsCameraReady(true);\n      }\n    }), _jsxs(View, {\n      style: styles.sideBarContainer,\n      children: [_jsxs(TouchableOpacity, {\n        style: styles.sideBarButton,\n        onPress: function onPress() {\n          return setCameraType(cameraType === CameraType.back ? CameraType.front : CameraType.back);\n        },\n        children: [_jsx(Feather, {\n          name: \"refresh-ccw\",\n          size: 24,\n          color: 'white'\n        }), _jsx(Text, {\n          style: styles.iconText,\n          children: \"Flip\"\n        })]\n      }), _jsxs(TouchableOpacity, {\n        style: styles.sideBarButton,\n        onPress: function onPress() {\n          return setCameraFlash(cameraFlash === FlashMode.off ? FlashMode.torch : FlashMode.off);\n        },\n        children: [_jsx(Feather, {\n          name: \"zap\",\n          size: 24,\n          color: 'white'\n        }), _jsx(Text, {\n          style: styles.iconText,\n          children: \"Flash\"\n        })]\n      }), _jsxs(TouchableOpacity, {\n        style: styles.sideBarButton,\n        onPress: function onPress() {\n          return setIsMuted(!isMuted);\n        },\n        children: [_jsx(Feather, {\n          name: isMuted ? \"mic-off\" : \"mic\",\n          size: 24,\n          color: 'white'\n        }), _jsx(Text, {\n          style: styles.iconText,\n          children: \"Mute\"\n        })]\n      })]\n    }), _jsxs(View, {\n      style: styles.bottomBarContainer,\n      children: [_jsx(View, {\n        style: {\n          flex: 1\n        }\n      }), _jsx(View, {\n        style: styles.recordButtonContainer,\n        children: isCameraReady && _jsx(FillButton, {\n          whenPressed: function whenPressed() {\n            return recordVideo();\n          },\n          whenReleased: function whenReleased() {\n            return stopVideo();\n          },\n          progressTimer: maxDuration * 1000\n        })\n      }), _jsx(View, {\n        style: {\n          flex: 1\n        },\n        children: _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return pickFromGallery();\n          },\n          style: styles.galleryButton,\n          children: galleryItems[0] && _jsx(Image, {\n            style: styles.galleryButtonImage,\n            source: {\n              uri: galleryItems[0].uri\n            }\n          })\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["useEffect","useState","View","TouchableOpacity","Image","Platform","Text","Camera","CameraType","FlashMode","Audio","ImagePicker","MediaLibrary","Feather","styles","useIsFocused","FillButton","jsx","_jsx","jsxs","_jsxs","CameraScreen","_ref","navigation","OS","style","container","children","noPermissionsText","isFocused","_useState","_useState2","_slicedToArray","isCameraReady","setIsCameraReady","_useState3","_useState4","hasCameraPermissions","setHasCameraPermissions","_useState5","_useState6","hasAudioPermissions","setHasAudioPermissions","_useState7","_useState8","hasGalleryPermissions","setHasGalleryPermissions","_useState9","_useState10","galleryItems","setGalleryItems","_useState11","_useState12","cameraRef","setCameraRef","_useState13","back","_useState14","cameraType","setCameraType","_useState15","off","_useState16","cameraFlash","setCameraFlash","_useState17","_useState18","isMuted","setIsMuted","_useState19","_useState20","maxDuration","setMaxDuration","_useState21","_useState22","minDuration","setMinDuration","requestPermissions","_ref2","_asyncToGenerator","cameraStatus","requestCameraPermissionsAsync","status","audioStatus","requestPermissionsAsync","galleryStatus","requestMediaLibraryPermissionsAsync","userGalleryMedia","getAssetsAsync","sortBy","mediaType","assets","apply","arguments","recordVideo","_ref3","options","quality","Constants","VideoQuality","mute","startTime","Date","videoRecordPromise","recordAsync","elapsedTime","getTime","alert","data","source","uri","navigate","error","console","warn","stopVideo","_ref4","stopRecording","pickFromGallery","_ref5","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Videos","allowsEditing","aspect","videoMaxDuration","canceled","ref","camera","ratio","type","flashMode","onCameraReady","sideBarContainer","sideBarButton","onPress","front","name","size","color","iconText","torch","bottomBarContainer","flex","recordButtonContainer","whenPressed","whenReleased","progressTimer","galleryButton","galleryButtonImage"],"sources":["/Users/mohammedkhedim/Gitclones/BeCrazy/becrazy/screens/camera/CameraScreen.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { View, TouchableOpacity, Image, Platform } from 'react-native'\nimport { Text } from '../../components/Themed'\nimport { Camera, CameraRecordingOptions, CameraType, FlashMode } from 'expo-camera'\nimport { Audio } from 'expo-av'\nimport * as ImagePicker from 'expo-image-picker'\nimport * as MediaLibrary from 'expo-media-library'\n\nimport { Feather } from '@expo/vector-icons'\n\n\nimport styles from './styles/camera'\nimport { RootStackScreenProps } from '../../types'\nimport { useIsFocused } from '@react-navigation/native'\nimport FillButton from '../../components/camera/FillButton'\n\n\n/**\n * Function that renders a component responsible showing\n * a view with the camera preview, recording videos, controling the camera and\n * letting the user pick a video from the gallery\n * @returns Functional Component\n */\nexport default function CameraScreen({ navigation }: RootStackScreenProps<'CameraScreen'>) {\n    // check if the user is on web and if so show message\n    if (Platform.OS === 'web') {\n        return (\n            <View style={styles.container}>\n                <Text style={styles.noPermissionsText}>This feature is not available on web</Text>\n            </View>\n        )\n    }\n\n\n\n    // check if the camera is ready and the user is focused on the screen to know when to show the camera preview\n    const isFocused = useIsFocused()\n\n    // is camera ready is for when the camera initializes\n    const [isCameraReady, setIsCameraReady] = useState(false)\n\n\n    // the state for the camera permissions and the gallery permissions\n    const [hasCameraPermissions, setHasCameraPermissions] = useState(false)\n    const [hasAudioPermissions, setHasAudioPermissions] = useState(false)\n    const [hasGalleryPermissions, setHasGalleryPermissions] = useState(false)\n\n    // state for the gallery items\n    const [galleryItems, setGalleryItems] = useState<Array<MediaLibrary.Asset>>([])\n\n    // state for the camera settings\n    const [cameraRef, setCameraRef] = useState<Camera | null>(null)\n    const [cameraType, setCameraType] = useState(CameraType.back)\n    const [cameraFlash, setCameraFlash] = useState(FlashMode.off)\n    const [isMuted, setIsMuted] = useState(true)\n    // duration are in seconds\n    const [maxDuration, setMaxDuration] = useState(30)\n    const [minDuration, setMinDuration] = useState(3)\n\n\n\n    useEffect(() => {\n        const requestPermissions = async () => {\n            const cameraStatus = await Camera.requestCameraPermissionsAsync()\n            setHasCameraPermissions(cameraStatus.status == 'granted')\n\n            const audioStatus = await Audio.requestPermissionsAsync()\n            setHasAudioPermissions(audioStatus.status == 'granted')\n\n            const galleryStatus = await ImagePicker.requestMediaLibraryPermissionsAsync()\n            setHasGalleryPermissions(galleryStatus.status == 'granted')\n\n            if (galleryStatus.status == 'granted') {\n                const userGalleryMedia = await MediaLibrary.getAssetsAsync({ sortBy: ['creationTime'], mediaType: ['video'] })\n                setGalleryItems(userGalleryMedia.assets)\n            }\n        }\n\n        requestPermissions()\n    }, [])\n\n\n\n    const recordVideo = async () => {\n        if (cameraRef) {\n            try {\n                /*\n                * The options for the video recording\n                * maxDuration: the maximum duration of the video = 60 seconds\n                * quality: the quality of the video = 480p\n                * */\n                const options: CameraRecordingOptions = {\n                    maxDuration: maxDuration,\n                    quality: Camera.Constants.VideoQuality['480'],\n                    mute: isMuted,\n                }\n\n                // Start the stopwatch\n                const startTime = new Date();\n                const videoRecordPromise = await cameraRef.recordAsync(options)\n\n                // Calculate the elapsed time\n                const elapsedTime = new Date().getTime() - startTime.getTime();\n                if (elapsedTime < minDuration * 1000) {\n                    alert('Video is too short')\n                    return\n                }\n\n\n                if (videoRecordPromise) {\n                    const data = videoRecordPromise;\n                    const source = data.uri\n                    navigation.navigate('SavePostScreen', { source })\n                }\n            } catch (error) {\n                console.warn(error)\n            }\n        }\n    }\n\n    const stopVideo = async () => {\n        if (cameraRef) {\n            cameraRef.stopRecording()\n        }\n    }\n\n\n\n    const pickFromGallery = async () => {\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Videos,\n            allowsEditing: true,\n            aspect: [16, 9],\n            quality: 1,\n            videoMaxDuration: maxDuration\n        })\n        if (!result.canceled) {\n            navigation.navigate('SavePostScreen', { source: result.assets[0].uri })\n        }\n    }\n\n\n    // if the user has not granted the camera and audio permissions, show a message\n    if (!hasCameraPermissions || !hasAudioPermissions || !hasGalleryPermissions) {\n        return (\n            <View style={styles.container}>\n                <Text style={styles.noPermissionsText}>You need to grant camera and audio permissions to use this feature</Text>\n            </View>\n        )\n    }\n\n    return (\n        <View style={styles.container}>\n            {isFocused && (\n                <Camera\n                    ref={(ref) => setCameraRef(ref)}\n                    style={styles.camera}\n                    ratio={'16:9'}\n                    type={cameraType}\n                    flashMode={cameraFlash}\n                    onCameraReady={() => setIsCameraReady(true)}\n                />\n            )}\n            <View style={styles.sideBarContainer}>\n                <TouchableOpacity\n                    style={styles.sideBarButton}\n                    onPress={() => setCameraType(cameraType === CameraType.back ? CameraType.front : CameraType.back)}>\n\n                    <Feather name=\"refresh-ccw\" size={24} color={'white'} />\n                    <Text style={styles.iconText}>Flip</Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                    style={styles.sideBarButton}\n                    onPress={() => setCameraFlash(cameraFlash === FlashMode.off ? FlashMode.torch : FlashMode.off)}>\n\n                    <Feather name=\"zap\" size={24} color={'white'} />\n                    <Text style={styles.iconText}>Flash</Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                    style={styles.sideBarButton}\n                    onPress={() => setIsMuted(!isMuted)}>\n\n                    <Feather name={isMuted ? \"mic-off\" : \"mic\"} size={24} color={'white'} />\n                    <Text style={styles.iconText}>Mute</Text>\n                </TouchableOpacity>\n            </View>\n\n\n            <View style={styles.bottomBarContainer}>\n                <View style={{ flex: 1 }}></View>\n                <View style={styles.recordButtonContainer}>\n                    {isCameraReady && (\n                        <FillButton\n                            whenPressed={() => recordVideo()}\n                            whenReleased={() => stopVideo()}\n                            // convert the max duration to milliseconds\n                            progressTimer={maxDuration * 1000}\n                        />\n                    )}\n                </View>\n                <View style={{ flex: 1 }}>\n                    <TouchableOpacity\n                        onPress={() => pickFromGallery()}\n                        style={styles.galleryButton}>\n                        {galleryItems[0] && (\n                            <Image\n                                style={styles.galleryButtonImage}\n                                source={{ uri: galleryItems[0].uri }}\n                            />\n                        )}\n                    </TouchableOpacity>\n                </View>\n            </View>\n        </View>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}